# 微服务
什么是微服务：https://www.zhihu.com/question/65502802

从单体应用-到微服务

原先不合理：
1.很多相同业务逻辑的重复代码。
2.数据有时候通过数据库共享，有时候通过接口调用传输。接口调用关系杂乱。
3.单个应用为了给其他应用提供接口，渐渐地越改越大，包含了很多本来就不属于它的逻辑。应用边界模糊，功能归属混乱。
4.数据库表结构被多个应用依赖，无法重构和优化。
5.所有应用都在一个数据库上操作，数据库出现性能瓶颈。特别是数据分析跑起来的时候，数据库性能急剧下降。
6.开发、测试、部署、维护愈发困难。即使只改动一个小功能，也需要整个应用一起发布。
7.团队出现推诿扯皮现象。关于一些公用的功能应该建设在哪个应用上的问题常常要争论很久，最后要么干脆各做各的，或者随便放个地方但是都不维护。




好处：
坏处：
1：微服务架构整个应用分散成多个服务，定位故障点非常困难。
2：稳定性下降。服务数量变多导致其中一个服务出现故障的概率增大，并且一个服务故障可能导致整个系统挂掉。
3：服务数量非常多，部署、管理的工作量很大。
4：开发方面：如何保证各个服务在持续开发的情况下仍然保持协同合作。
5：测试方面：服务拆分后，几乎所有功能都会涉及多个服务。原本单个程序的测试变为服务间调用的测试。测试变得更加复杂。


如何解决：
1、监控：发现故障的征兆
2、定位问题：链路追踪
3、分析问题： 日志分析 ELK
【如何将日志发送到Logstash。一种方案是在日志输出的时候直接调用Logstash接口将日志发送过去。这样一来又（咦，为啥要用“又”）要修改代码……于是小明选用了另一种方案：日志仍然输出到文件，每个服务里再部署个Agent扫描日志文件然后输出给Logstash。】
4、服务注册于发现 - 动态扩容
